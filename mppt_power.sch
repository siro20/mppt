EESchema Schematic File Version 4
LIBS:mppt_power-cache
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Device:L_Core_Ferrite_Coupled L?
U 1 1 5D4B5F4A
P 2950 1450
F 0 "L?" H 2950 1731 50  0000 C CNN
F 1 "B82726S6243A40 " H 2950 1640 50  0000 C CNN
F 2 "" H 2950 1450 50  0001 C CNN
F 3 "~" H 2950 1450 50  0001 C CNN
	1    2950 1450
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5D4B7292
P 2100 1250
F 0 "C?" H 2192 1296 50  0000 L CNN
F 1 "100n" H 2192 1205 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 2100 1250 50  0001 C CNN
F 3 "~" H 2100 1250 50  0001 C CNN
	1    2100 1250
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5D4BA9AE
P 2100 1550
F 0 "C?" H 2192 1596 50  0000 L CNN
F 1 "100n" H 2192 1505 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 2100 1550 50  0001 C CNN
F 3 "~" H 2100 1550 50  0001 C CNN
	1    2100 1550
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5D4BDA1C
P 3350 1450
F 0 "C?" H 3442 1496 50  0000 L CNN
F 1 "100n" H 3442 1405 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 3350 1450 50  0001 C CNN
F 3 "~" H 3350 1450 50  0001 C CNN
	1    3350 1450
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 1450 2100 1400
Wire Wire Line
	2100 1650 2700 1650
Wire Wire Line
	2700 1650 2700 1550
Wire Wire Line
	2700 1550 2750 1550
Wire Wire Line
	2750 1350 2700 1350
Wire Wire Line
	2700 1350 2700 1150
Wire Wire Line
	2700 1150 2100 1150
Wire Wire Line
	3150 1350 3350 1350
Wire Wire Line
	3150 1550 3350 1550
$Comp
L power:GND #PWR?
U 1 1 5D4C0A8E
P 3350 1600
F 0 "#PWR?" H 3350 1350 50  0001 C CNN
F 1 "GND" H 3355 1427 50  0000 C CNN
F 2 "" H 3350 1600 50  0001 C CNN
F 3 "" H 3350 1600 50  0001 C CNN
	1    3350 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	3350 1600 3350 1550
Connection ~ 3350 1550
Wire Wire Line
	3350 1350 3600 1350
Connection ~ 3350 1350
$Comp
L Connector:Screw_Terminal_01x02 J?
U 1 1 5D4C4A85
P 1000 1450
F 0 "J?" H 918 1125 50  0000 C CNN
F 1 "Screw_Terminal_01x02" H 918 1216 50  0000 C CNN
F 2 "" H 1000 1450 50  0001 C CNN
F 3 "~" H 1000 1450 50  0001 C CNN
	1    1000 1450
	-1   0    0    1   
$EndComp
Wire Wire Line
	1200 1350 1500 1350
Wire Wire Line
	1500 1350 1500 1150
Wire Wire Line
	1500 1150 1600 1150
Connection ~ 2100 1150
Wire Wire Line
	1200 1450 1500 1450
Wire Wire Line
	1500 1450 1500 1650
Wire Wire Line
	1500 1650 1600 1650
Connection ~ 2100 1650
$Comp
L power:Earth #PWR?
U 1 1 5D4C7D3C
P 2500 1850
F 0 "#PWR?" H 2500 1600 50  0001 C CNN
F 1 "Earth" H 2500 1700 50  0001 C CNN
F 2 "" H 2500 1850 50  0001 C CNN
F 3 "~" H 2500 1850 50  0001 C CNN
	1    2500 1850
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 1400 2500 1400
Wire Wire Line
	2500 1400 2500 1850
Connection ~ 2100 1400
Wire Wire Line
	2100 1400 2100 1350
Text Notes 800  1050 0    50   ~ 10
Input filter
Text GLabel 6950 1350 2    50   Input ~ 0
V_IN
$Comp
L Device:L_Core_Ferrite_Coupled L?
U 1 1 5D699F52
P 8650 4750
F 0 "L?" H 8650 5031 50  0000 C CNN
F 1 "SC-07-276JH" H 8650 4940 50  0000 C CNN
F 2 "" H 8650 4750 50  0001 C CNN
F 3 "https://www.mouser.de/datasheet/2/212/KEM_LF0010_SC-JH-1104039.pdf" H 8650 4750 50  0001 C CNN
	1    8650 4750
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5D6DF2BC
P 9100 4600
F 0 "C?" H 9192 4646 50  0000 L CNN
F 1 "100n" H 9192 4555 50  0000 L CNN
F 2 "" H 9100 4600 50  0001 C CNN
F 3 "~" H 9100 4600 50  0001 C CNN
	1    9100 4600
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5D6DF2C2
P 9100 4900
F 0 "C?" H 9192 4946 50  0000 L CNN
F 1 "100n" H 9192 4855 50  0000 L CNN
F 2 "" H 9100 4900 50  0001 C CNN
F 3 "~" H 9100 4900 50  0001 C CNN
	1    9100 4900
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 4800 9100 4750
Wire Wire Line
	9100 5000 9700 5000
Wire Wire Line
	9700 4500 9100 4500
Connection ~ 9100 4500
Connection ~ 9100 5000
$Comp
L power:Earth #PWR?
U 1 1 5D6DF2D3
P 9500 5200
F 0 "#PWR?" H 9500 4950 50  0001 C CNN
F 1 "Earth" H 9500 5050 50  0001 C CNN
F 2 "" H 9500 5200 50  0001 C CNN
F 3 "~" H 9500 5200 50  0001 C CNN
	1    9500 5200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 4750 9500 4750
Wire Wire Line
	9500 4750 9500 5200
Connection ~ 9100 4750
Wire Wire Line
	9100 4750 9100 4700
$Comp
L Connector:Screw_Terminal_01x03 J?
U 1 1 5D6FBDF7
P 9900 4750
F 0 "J?" H 9980 4792 50  0000 L CNN
F 1 "Screw_Terminal_01x03" H 9980 4701 50  0000 L CNN
F 2 "" H 9900 4750 50  0001 C CNN
F 3 "~" H 9900 4750 50  0001 C CNN
	1    9900 4750
	1    0    0    -1  
$EndComp
Connection ~ 9500 4750
Wire Wire Line
	9700 4750 9500 4750
Wire Wire Line
	9700 4650 9700 4500
Wire Wire Line
	9700 5000 9700 4850
Wire Wire Line
	8850 4650 8850 4500
Wire Wire Line
	8850 4500 9100 4500
Wire Wire Line
	8850 5000 8850 4850
Wire Wire Line
	8850 5000 9100 5000
$Comp
L power:GNDA #PWR?
U 1 1 5D75A361
P 7850 5100
F 0 "#PWR?" H 7850 4850 50  0001 C CNN
F 1 "GNDA" H 7855 4927 50  0000 C CNN
F 2 "" H 7850 5100 50  0001 C CNN
F 3 "" H 7850 5100 50  0001 C CNN
	1    7850 5100
	1    0    0    -1  
$EndComp
Wire Wire Line
	8450 4850 8400 4850
Wire Wire Line
	8400 4850 8400 5100
Wire Notes Line
	3700 950  3700 2000
Wire Notes Line
	700  2000 700  950 
Text Notes 1750 3750 0    50   ~ 10
power for main logic
Wire Wire Line
	8300 4650 8450 4650
$Comp
L power:+12V #PWR?
U 1 1 5D9992BC
P 5950 4550
F 0 "#PWR?" H 5950 4400 50  0001 C CNN
F 1 "+12V" H 5965 4723 50  0000 C CNN
F 2 "" H 5950 4550 50  0001 C CNN
F 3 "" H 5950 4550 50  0001 C CNN
	1    5950 4550
	1    0    0    -1  
$EndComp
Text GLabel 5800 4750 0    50   Input ~ 0
V_IN
$Comp
L power:GND #PWR?
U 1 1 5D9999C7
P 5950 4850
F 0 "#PWR?" H 5950 4600 50  0001 C CNN
F 1 "GND" H 5955 4677 50  0000 C CNN
F 2 "" H 5950 4850 50  0001 C CNN
F 3 "" H 5950 4850 50  0001 C CNN
	1    5950 4850
	1    0    0    -1  
$EndComp
Wire Wire Line
	6250 4850 5950 4850
Wire Wire Line
	6250 4750 5800 4750
Wire Wire Line
	6250 4550 5950 4550
$Comp
L power:GNDA #PWR?
U 1 1 5D9B08F8
P 8400 5100
F 0 "#PWR?" H 8400 4850 50  0001 C CNN
F 1 "GNDA" H 8405 4927 50  0000 C CNN
F 2 "" H 8400 5100 50  0001 C CNN
F 3 "" H 8400 5100 50  0001 C CNN
	1    8400 5100
	1    0    0    -1  
$EndComp
$Sheet
S 2250 4250 1300 650 
U 5DAB7E1F
F0 "logic_power" 50
F1 "logic_power.sch" 50
F2 "12V+_isolated" I R 3550 4400 50 
F3 "12V-_isolated" I R 3550 4500 50 
F4 "V_IN" I L 2250 4400 50 
F5 "12V+" I R 3550 4700 50 
F6 "12V-" I R 3550 4800 50 
F7 "V_SUPPLY" I L 2250 4650 50 
$EndSheet
Text GLabel 2050 4400 0    50   Input ~ 0
V_IN
$Comp
L power:+12V #PWR?
U 1 1 5DB5C7FC
P 3900 4150
F 0 "#PWR?" H 3900 4000 50  0001 C CNN
F 1 "+12V" H 3915 4323 50  0000 C CNN
F 2 "" H 3900 4150 50  0001 C CNN
F 3 "" H 3900 4150 50  0001 C CNN
	1    3900 4150
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5DB5CEE6
P 3900 4950
F 0 "#PWR?" H 3900 4700 50  0001 C CNN
F 1 "GND" H 3905 4777 50  0000 C CNN
F 2 "" H 3900 4950 50  0001 C CNN
F 3 "" H 3900 4950 50  0001 C CNN
	1    3900 4950
	1    0    0    -1  
$EndComp
$Comp
L power:+12VA #PWR?
U 1 1 5DB5D7A9
P 4150 4150
F 0 "#PWR?" H 4150 4000 50  0001 C CNN
F 1 "+12VA" H 4165 4323 50  0000 C CNN
F 2 "" H 4150 4150 50  0001 C CNN
F 3 "" H 4150 4150 50  0001 C CNN
	1    4150 4150
	1    0    0    -1  
$EndComp
$Comp
L power:GNDA #PWR?
U 1 1 5DB5E8E8
P 4150 4950
F 0 "#PWR?" H 4150 4700 50  0001 C CNN
F 1 "GNDA" H 4155 4777 50  0000 C CNN
F 2 "" H 4150 4950 50  0001 C CNN
F 3 "" H 4150 4950 50  0001 C CNN
	1    4150 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3550 4500 4150 4500
Wire Wire Line
	4150 4500 4150 4950
Wire Wire Line
	3550 4400 4150 4400
Wire Wire Line
	4150 4400 4150 4150
Wire Wire Line
	3900 4700 3900 4150
Wire Wire Line
	3550 4700 3900 4700
Wire Wire Line
	3550 4800 3900 4800
Wire Wire Line
	3900 4800 3900 4950
Wire Wire Line
	2050 4400 2250 4400
Wire Notes Line
	1650 3600 5050 3600
Wire Notes Line
	5050 3600 5050 5450
Wire Notes Line
	5050 5450 1650 5450
Wire Notes Line
	1650 5450 1650 3600
$Comp
L power:+12VA #PWR?
U 1 1 5D5533DC
P 7750 4350
F 0 "#PWR?" H 7750 4200 50  0001 C CNN
F 1 "+12VA" H 7765 4523 50  0000 C CNN
F 2 "" H 7750 4350 50  0001 C CNN
F 3 "" H 7750 4350 50  0001 C CNN
	1    7750 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	7450 4850 7750 4850
Wire Wire Line
	7750 4850 7750 4350
Wire Wire Line
	7450 4650 7850 4650
Wire Wire Line
	7850 4650 7850 4950
Wire Wire Line
	7450 4950 7850 4950
Connection ~ 7850 4950
Wire Wire Line
	7850 4950 7850 5100
Wire Wire Line
	7450 4550 8300 4550
Wire Wire Line
	8300 4550 8300 4650
Wire Notes Line
	5350 5800 10650 5800
Wire Notes Line
	10650 3600 5350 3600
Text Notes 5400 3750 0    50   ~ 10
isolated current limited DC/DC
Text GLabel 5200 1650 2    50   Input ~ 0
SDA
Text GLabel 5200 1750 2    50   Input ~ 0
SCL
$Comp
L MAX:MAX11647 U?
U 1 1 5D61367E
P 4100 6850
F 0 "U?" H 4100 7475 50  0000 C CNN
F 1 "MAX11647EUA+" H 4100 7384 50  0000 C CNN
F 2 "Package_SO:MSOP-8_3x3mm_P0.65mm" H 4100 6850 50  0001 C CNN
F 3 "https://www.mouser.de/datasheet/2/256/MAX11646-MAX11647-1513342.pdf" H 4100 6850 50  0001 C CNN
	1    4100 6850
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5D6156B2
P 4750 6850
F 0 "#PWR?" H 4750 6600 50  0001 C CNN
F 1 "GND" H 4755 6677 50  0000 C CNN
F 2 "" H 4750 6850 50  0001 C CNN
F 3 "" H 4750 6850 50  0001 C CNN
	1    4750 6850
	1    0    0    -1  
$EndComp
$Comp
L SparkFunPowerSym:3.3V #SUPPLY?
U 1 1 5D616519
P 4850 6250
F 0 "#SUPPLY?" H 4900 6250 45  0001 L BNN
F 1 "3.3V" H 4850 6420 45  0000 C CNN
F 2 "" H 4850 6431 60  0000 C CNN
F 3 "" H 4850 6250 60  0001 C CNN
	1    4850 6250
	1    0    0    -1  
$EndComp
Wire Wire Line
	4500 6550 4750 6550
Wire Wire Line
	4750 6550 4750 6850
Wire Wire Line
	4500 6650 4950 6650
Wire Wire Line
	4500 6750 4950 6750
Text GLabel 4950 6650 2    50   Input ~ 0
SDA
Text GLabel 4950 6750 2    50   Input ~ 0
SCL
$Comp
L Device:C_Small C?
U 1 1 5D625C35
P 4850 6450
F 0 "C?" H 4942 6496 50  0000 L CNN
F 1 "100n" H 4942 6405 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 4850 6450 50  0001 C CNN
F 3 "~" H 4850 6450 50  0001 C CNN
	1    4850 6450
	1    0    0    -1  
$EndComp
Wire Wire Line
	4850 6550 4750 6550
Connection ~ 4750 6550
Wire Wire Line
	4850 6350 4600 6350
Wire Wire Line
	4600 6350 4600 6450
Wire Wire Line
	4600 6450 4500 6450
Wire Wire Line
	4850 6350 4850 6250
Connection ~ 4850 6350
NoConn ~ 3700 6750
$Comp
L SparkFunPowerSym:3.3V #SUPPLY?
U 1 1 5D644F1D
P 2800 6050
F 0 "#SUPPLY?" H 2850 6050 45  0001 L BNN
F 1 "3.3V" H 2800 6220 45  0000 C CNN
F 2 "" H 2800 6231 60  0000 C CNN
F 3 "" H 2800 6050 60  0001 C CNN
	1    2800 6050
	1    0    0    -1  
$EndComp
$Comp
L SparkFunPowerSym:3.3V #SUPPLY?
U 1 1 5D6467B0
P 1550 6050
F 0 "#SUPPLY?" H 1600 6050 45  0001 L BNN
F 1 "3.3V" H 1550 6220 45  0000 C CNN
F 2 "" H 1550 6231 60  0000 C CNN
F 3 "" H 1550 6050 60  0001 C CNN
	1    1550 6050
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5D656E16
P 1550 7200
F 0 "#PWR?" H 1550 6950 50  0001 C CNN
F 1 "GND" H 1555 7027 50  0000 C CNN
F 2 "" H 1550 7200 50  0001 C CNN
F 3 "" H 1550 7200 50  0001 C CNN
	1    1550 7200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5D65751D
P 2800 7200
F 0 "#PWR?" H 2800 6950 50  0001 C CNN
F 1 "GND" H 2805 7027 50  0000 C CNN
F 2 "" H 2800 7200 50  0001 C CNN
F 3 "" H 2800 7200 50  0001 C CNN
	1    2800 7200
	1    0    0    -1  
$EndComp
Wire Notes Line
	1250 7450 1250 5700
Wire Notes Line
	1250 5700 5200 5700
Wire Notes Line
	5200 5700 5200 7450
Wire Notes Line
	5200 7450 1250 7450
Text Notes 3600 5850 0    50   ~ 10
temperature sensors
Text Notes 3800 6900 0    50   ~ 0
address: 0110110
Text Notes 1750 5200 0    50   ~ 0
reduce current to minimum on V_BACKUP\nOnly for RTC backup
$Comp
L MCU_Module:Arduino_Nano_v2.x A?
U 1 1 5D6B3117
P 9800 2000
F 0 "A?" H 9800 911 50  0000 C CNN
F 1 "Arduino_Nano_v2.x" H 9800 820 50  0000 C CNN
F 2 "Module:Arduino_Nano" H 9950 1050 50  0001 L CNN
F 3 "https://www.arduino.cc/en/uploads/Main/ArduinoNanoManual23.pdf" H 9800 1000 50  0001 C CNN
	1    9800 2000
	1    0    0    -1  
$EndComp
$Comp
L power:VBUS #PWR?
U 1 1 5D6B4DF9
P 9700 700
F 0 "#PWR?" H 9700 550 50  0001 C CNN
F 1 "VBUS" H 9715 873 50  0000 C CNN
F 2 "" H 9700 700 50  0001 C CNN
F 3 "" H 9700 700 50  0001 C CNN
	1    9700 700 
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5D6C01E8
P 9900 700
F 0 "#PWR?" H 9900 550 50  0001 C CNN
F 1 "+3.3V" H 9915 873 50  0000 C CNN
F 2 "" H 9900 700 50  0001 C CNN
F 3 "" H 9900 700 50  0001 C CNN
	1    9900 700 
	1    0    0    -1  
$EndComp
Text GLabel 10550 2400 2    50   Input ~ 0
SDA
Text GLabel 10550 2500 2    50   Input ~ 0
SCL
Wire Wire Line
	10550 2400 10300 2400
Wire Wire Line
	10550 2500 10300 2500
$Comp
L power:GND #PWR?
U 1 1 5D6FE45D
P 9800 3350
F 0 "#PWR?" H 9800 3100 50  0001 C CNN
F 1 "GND" H 9805 3177 50  0000 C CNN
F 2 "" H 9800 3350 50  0001 C CNN
F 3 "" H 9800 3350 50  0001 C CNN
	1    9800 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	9800 3000 9800 3100
Wire Wire Line
	9900 3100 9800 3100
Connection ~ 9800 3100
Wire Wire Line
	9800 3100 9800 3350
Wire Wire Line
	9900 3000 9900 3100
Wire Wire Line
	9300 2100 9000 2100
Text GLabel 8800 2100 0    50   Input ~ 0
INT_VOLTAGE_LIMIT
Wire Wire Line
	10300 2000 10550 2000
Text GLabel 10550 2000 2    50   Input ~ 0
DISABLE_PP
$Comp
L Device:R R?
U 1 1 5D786A96
P 7550 1500
F 0 "R?" V 7343 1500 50  0000 C CNN
F 1 "220k" V 7434 1500 50  0000 C CNN
F 2 "" V 7480 1500 50  0001 C CNN
F 3 "~" H 7550 1500 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 7550 1500 50  0001 C CNN "Recommended"
	1    7550 1500
	-1   0    0    1   
$EndComp
$Comp
L Device:R R?
U 1 1 5D787084
P 7550 1900
F 0 "R?" V 7343 1900 50  0000 C CNN
F 1 "64k" V 7434 1900 50  0000 C CNN
F 2 "" V 7480 1900 50  0001 C CNN
F 3 "~" H 7550 1900 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 7550 1900 50  0001 C CNN "Recommended"
	1    7550 1900
	-1   0    0    1   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5D78750C
P 7550 2150
F 0 "#PWR?" H 7550 1900 50  0001 C CNN
F 1 "GND" H 7555 1977 50  0000 C CNN
F 2 "" H 7550 2150 50  0001 C CNN
F 3 "" H 7550 2150 50  0001 C CNN
	1    7550 2150
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR?
U 1 1 5D7885C6
P 7550 1250
F 0 "#PWR?" H 7550 1100 50  0001 C CNN
F 1 "+12V" H 7565 1423 50  0000 C CNN
F 2 "" H 7550 1250 50  0001 C CNN
F 3 "" H 7550 1250 50  0001 C CNN
	1    7550 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	7550 2050 7550 2150
Wire Wire Line
	7550 1350 7550 1250
Wire Wire Line
	7550 1650 7550 1700
Connection ~ 7550 1700
Wire Wire Line
	7550 1700 7550 1750
$Comp
L Device:D_Schottky D?
U 1 1 5D79F4FA
P 7850 1550
F 0 "D?" V 7804 1629 50  0000 L CNN
F 1 "D_Schottky" V 7895 1629 50  0000 L CNN
F 2 "" H 7850 1550 50  0001 C CNN
F 3 "~" H 7850 1550 50  0001 C CNN
	1    7850 1550
	0    1    1    0   
$EndComp
Connection ~ 7850 1700
Wire Wire Line
	7850 1700 7550 1700
$Comp
L power:+3.3V #PWR?
U 1 1 5D7BD996
P 7850 1400
F 0 "#PWR?" H 7850 1250 50  0001 C CNN
F 1 "+3.3V" H 7865 1573 50  0000 C CNN
F 2 "" H 7850 1400 50  0001 C CNN
F 3 "" H 7850 1400 50  0001 C CNN
	1    7850 1400
	1    0    0    -1  
$EndComp
Text GLabel 7550 5400 2    50   Input ~ 0
INT_VOLTAGE_LIMIT
$Comp
L Device:R R?
U 1 1 5D815EDF
P 9000 1950
F 0 "R?" V 8793 1950 50  0000 C CNN
F 1 "10k" V 8884 1950 50  0000 C CNN
F 2 "" V 8930 1950 50  0001 C CNN
F 3 "~" H 9000 1950 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 9000 1950 50  0001 C CNN "Recommended"
	1    9000 1950
	-1   0    0    1   
$EndComp
Connection ~ 9000 2100
Wire Wire Line
	9000 2100 8800 2100
$Comp
L power:+3.3V #PWR?
U 1 1 5D816B65
P 9000 1600
F 0 "#PWR?" H 9000 1450 50  0001 C CNN
F 1 "+3.3V" H 9015 1773 50  0000 C CNN
F 2 "" H 9000 1600 50  0001 C CNN
F 3 "" H 9000 1600 50  0001 C CNN
	1    9000 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 1600 9000 1800
$Sheet
S 6250 4450 1200 1100
U 5D82C26D
F0 "DCDC" 50
F1 "dcdc.sch" 50
F2 "V_OUT+" I R 7450 4550 50 
F3 "V_IN+" I L 6250 4750 50 
F4 "V_12V" I L 6250 4550 50 
F5 "V_OUT-" I R 7450 4650 50 
F6 "V_IN-" I L 6250 4850 50 
F7 "12V+_isolated" I R 7450 4850 50 
F8 "12V-_isolated" I R 7450 4950 50 
F9 "VOLTAGE_LIMIT_OD" I R 7450 5400 50 
F10 "SHUTDOWN" I L 6250 5100 50 
F11 "SCL" I L 6250 5250 50 
F12 "SDA" I L 6250 5350 50 
F13 "3.3V" I L 6250 4650 50 
$EndSheet
Text GLabel 5800 5100 0    50   Input ~ 0
DISABLE_PP
Wire Wire Line
	6250 5100 5800 5100
Text Notes 8500 1000 0    50   ~ 10
STM32L031 (Nucleo-32)
Wire Wire Line
	7850 1700 9300 1700
Wire Wire Line
	7550 5400 7450 5400
$Comp
L Isolator:SFH617A-2X019T U?
U 1 1 5D9224BB
P 7950 2950
F 0 "U?" H 7950 3275 50  0000 C CNN
F 1 "SFH617A-2X019T" H 7950 3184 50  0000 C CNN
F 2 "Package_DIP:SMDIP-4_W7.62mm" H 7950 2650 50  0001 C CNN
F 3 "http://www.vishay.com/docs/83740/sfh617a.pdf" H 7600 3250 50  0001 C CNN
	1    7950 2950
	1    0    0    -1  
$EndComp
$Comp
L Sensor_Temperature:LM35-LP U?
U 1 1 5D998141
P 2800 6550
F 0 "U?" H 2470 6596 50  0000 R CNN
F 1 "TMP36" H 2470 6505 50  0000 R CNN
F 2 "" H 2850 6300 50  0001 L CNN
F 3 "https://www.analog.com/media/en/technical-documentation/data-sheets/TMP35_36_37.pdf" H 2800 6550 50  0001 C CNN
	1    2800 6550
	1    0    0    -1  
$EndComp
$Comp
L Sensor_Temperature:LM35-LP U?
U 1 1 5D9B10A4
P 1550 6550
F 0 "U?" H 1220 6596 50  0000 R CNN
F 1 "TMP36" H 1220 6505 50  0000 R CNN
F 2 "" H 1600 6300 50  0001 L CNN
F 3 "https://www.analog.com/media/en/technical-documentation/data-sheets/TMP35_36_37.pdf" H 1550 6550 50  0001 C CNN
	1    1550 6550
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 6250 2800 6050
Wire Wire Line
	2800 6850 2800 7200
Wire Wire Line
	1550 6850 1550 7200
Wire Wire Line
	1550 6250 1550 6050
Wire Wire Line
	3700 6550 3200 6550
Wire Wire Line
	1950 6550 2050 6550
Wire Wire Line
	2050 6550 2050 6150
Wire Wire Line
	2050 6150 3550 6150
Wire Wire Line
	3550 6150 3550 6450
Wire Wire Line
	3550 6450 3700 6450
Text Notes 3450 7050 0    50   ~ 0
Internal Vref = 2.048V
$Comp
L power:GND #PWR?
U 1 1 5D65C100
P 8350 3150
F 0 "#PWR?" H 8350 2900 50  0001 C CNN
F 1 "GND" H 8355 2977 50  0000 C CNN
F 2 "" H 8350 3150 50  0001 C CNN
F 3 "" H 8350 3150 50  0001 C CNN
	1    8350 3150
	1    0    0    -1  
$EndComp
Wire Wire Line
	8250 3050 8350 3050
Wire Wire Line
	8350 3050 8350 3150
$Comp
L Device:R R?
U 1 1 5D662C62
P 7350 2850
F 0 "R?" V 7143 2850 50  0000 C CNN
F 1 "470" V 7234 2850 50  0000 C CNN
F 2 "" V 7280 2850 50  0001 C CNN
F 3 "~" H 7350 2850 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 7350 2850 50  0001 C CNN "Recommended"
	1    7350 2850
	0    1    1    0   
$EndComp
Wire Wire Line
	7650 2850 7500 2850
Wire Wire Line
	7650 3050 7050 3050
Text Notes 7350 1850 1    50   ~ 0
sense low power
Text Notes 8200 2250 0    50   ~ 0
sense output no load
$Comp
L Connector:Conn_01x02_Male J?
U 1 1 5D681563
P 6600 2900
F 0 "J?" H 6708 3081 50  0000 C CNN
F 1 "Conn_01x02_Male" H 6708 2990 50  0000 C CNN
F 2 "" H 6600 2900 50  0001 C CNN
F 3 "~" H 6600 2900 50  0001 C CNN
	1    6600 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6800 3000 7050 3000
Wire Wire Line
	7050 3000 7050 3050
Wire Wire Line
	7200 2850 7050 2850
Wire Wire Line
	7050 2850 7050 2900
Wire Wire Line
	7050 2900 6800 2900
Text Notes 6850 3200 0    50   ~ 0
external force disable
Wire Wire Line
	8250 2850 8350 2850
Wire Wire Line
	8350 2850 8350 2400
Wire Wire Line
	8350 2400 7850 2400
Wire Wire Line
	7850 2400 7850 1700
Wire Notes Line
	5350 3600 5350 5800
Wire Notes Line
	10650 3600 10650 5800
Text GLabel 5850 5250 0    50   Input ~ 0
SCL
Text GLabel 5850 5350 0    50   Input ~ 0
SDA
Wire Wire Line
	6250 5250 5850 5250
Wire Wire Line
	6250 5350 5850 5350
$Comp
L SparkFunPowerSym:3.3V #SUPPLY?
U 1 1 5D83FC9A
P 5700 4550
F 0 "#SUPPLY?" H 5750 4550 45  0001 L BNN
F 1 "3.3V" H 5700 4720 45  0000 C CNN
F 2 "" H 5700 4731 60  0000 C CNN
F 3 "" H 5700 4550 60  0001 C CNN
	1    5700 4550
	1    0    0    -1  
$EndComp
Wire Wire Line
	6250 4650 5700 4650
Wire Wire Line
	5700 4650 5700 4550
Text Notes 10350 1900 0    50   ~ 0
disable main SMPS
$Comp
L Device:R R?
U 1 1 5D9235ED
P 8900 2700
F 0 "R?" V 8693 2700 50  0000 C CNN
F 1 "1k" V 8784 2700 50  0000 C CNN
F 2 "" V 8830 2700 50  0001 C CNN
F 3 "~" H 8900 2700 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 8900 2700 50  0001 C CNN "Recommended"
	1    8900 2700
	-1   0    0    1   
$EndComp
$Comp
L Device:LED D?
U 1 1 5D923BBF
P 8900 3100
F 0 "D?" V 8939 2983 50  0000 R CNN
F 1 "LED" V 8848 2983 50  0000 R CNN
F 2 "" H 8900 3100 50  0001 C CNN
F 3 "~" H 8900 3100 50  0001 C CNN
	1    8900 3100
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5D9243DF
P 8900 3350
F 0 "#PWR?" H 8900 3100 50  0001 C CNN
F 1 "GND" H 8905 3177 50  0000 C CNN
F 2 "" H 8900 3350 50  0001 C CNN
F 3 "" H 8900 3350 50  0001 C CNN
	1    8900 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	8900 3350 8900 3250
Wire Wire Line
	8900 2950 8900 2850
Wire Wire Line
	8900 2400 8900 2550
Wire Wire Line
	8900 2400 9300 2400
Wire Notes Line
	8600 2350 9150 2350
Wire Notes Line
	9150 2350 9150 3500
Wire Notes Line
	9150 3500 8600 3500
Wire Notes Line
	8600 3500 8600 2350
Text Notes 8700 3250 1    50   ~ 0
debug LED
Wire Wire Line
	5200 1350 5200 1050
Text GLabel 5200 1000 1    50   Input ~ 0
V_IN_CS
$Comp
L Device:R R?
U 1 1 5D98FA83
P 1650 3150
AR Path="/5D98FA83" Ref="R?"  Part="1" 
AR Path="/5DAB7E1F/5D98FA83" Ref="R?"  Part="1" 
F 0 "R?" V 1443 3150 50  0000 C CNN
F 1 "130" V 1534 3150 50  0000 C CNN
F 2 "" V 1580 3150 50  0001 C CNN
F 3 "~" H 1650 3150 50  0001 C CNN
	1    1650 3150
	-1   0    0    1   
$EndComp
$Comp
L Device:D_Zener_Small D?
U 1 1 5D98FA8D
P 1100 2900
AR Path="/5DAB7E1F/5D98FA8D" Ref="D?"  Part="1" 
AR Path="/5D98FA8D" Ref="D?"  Part="1" 
F 0 "D?" V 1054 2968 50  0000 L CNN
F 1 "BZT52B6V8" V 1145 2968 50  0000 L CNN
F 2 "Diode_SMD:D_SOD-123" V 1100 2900 50  0001 C CNN
F 3 "~" V 1100 2900 50  0001 C CNN
	1    1100 2900
	0    1    1    0   
$EndComp
$Comp
L Device:Q_NPN_BCE Q?
U 1 1 5D98FA93
P 1550 2700
AR Path="/5DAB7E1F/5D98FA93" Ref="Q?"  Part="1" 
AR Path="/5D98FA93" Ref="Q?"  Part="1" 
F 0 "Q?" H 1740 2746 50  0000 L CNN
F 1 "MMBTA42" H 1740 2655 50  0000 L CNN
F 2 "" H 1750 2800 50  0001 C CNN
F 3 "~" H 1550 2700 50  0001 C CNN
	1    1550 2700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5D98FA99
P 1100 3100
AR Path="/5D98FA99" Ref="#PWR?"  Part="1" 
AR Path="/5DAB7E1F/5D98FA99" Ref="#PWR?"  Part="1" 
F 0 "#PWR?" H 1100 2850 50  0001 C CNN
F 1 "GND" H 1105 2927 50  0000 C CNN
F 2 "" H 1100 3100 50  0001 C CNN
F 3 "" H 1100 3100 50  0001 C CNN
	1    1100 3100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D98FA9F
P 1100 2550
AR Path="/5D98FA9F" Ref="R?"  Part="1" 
AR Path="/5DAB7E1F/5D98FA9F" Ref="R?"  Part="1" 
F 0 "R?" V 893 2550 50  0000 C CNN
F 1 "100k" V 984 2550 50  0000 C CNN
F 2 "" V 1030 2550 50  0001 C CNN
F 3 "~" H 1100 2550 50  0001 C CNN
	1    1100 2550
	-1   0    0    1   
$EndComp
Wire Wire Line
	1650 2500 1650 2350
Wire Wire Line
	1650 2900 1650 3000
Wire Wire Line
	1350 2700 1100 2700
Wire Wire Line
	1100 2800 1100 2700
Connection ~ 1100 2700
Wire Wire Line
	1100 3100 1100 3000
Wire Wire Line
	1650 2350 1100 2350
Wire Wire Line
	1100 2350 1100 2400
Text GLabel 2400 2350 2    50   Input ~ 0
V_IN_CS
Wire Wire Line
	2250 4650 1500 4650
Wire Wire Line
	1500 4650 1500 3450
Wire Wire Line
	1650 3450 1650 3300
$Comp
L power:VBUS #PWR?
U 1 1 5D9C9F57
P 2350 3300
F 0 "#PWR?" H 2350 3150 50  0001 C CNN
F 1 "VBUS" H 2365 3473 50  0000 C CNN
F 2 "" H 2350 3300 50  0001 C CNN
F 3 "" H 2350 3300 50  0001 C CNN
	1    2350 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 3450 1850 3450
Wire Wire Line
	2350 3450 2350 3300
Connection ~ 1650 3450
$Comp
L Device:R R?
U 1 1 5D9E2AE3
P 9900 850
F 0 "R?" V 9693 850 50  0000 C CNN
F 1 "0" V 9784 850 50  0000 C CNN
F 2 "" V 9830 850 50  0001 C CNN
F 3 "~" H 9900 850 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 9900 850 50  0001 C CNN "Recommended"
	1    9900 850 
	-1   0    0    1   
$EndComp
$Comp
L Device:R R?
U 1 1 5D9F6706
P 9700 850
F 0 "R?" V 9493 850 50  0000 C CNN
F 1 "0" V 9584 850 50  0000 C CNN
F 2 "" V 9630 850 50  0001 C CNN
F 3 "~" H 9700 850 50  0001 C CNN
F 4 "PMR18EZPJU7L0" V 9700 850 50  0001 C CNN "Recommended"
	1    9700 850 
	-1   0    0    1   
$EndComp
$Comp
L Device:R R?
U 1 1 5DA2998A
P 2000 2350
AR Path="/5DA2998A" Ref="R?"  Part="1" 
AR Path="/5DAB7E1F/5DA2998A" Ref="R?"  Part="1" 
F 0 "R?" V 1793 2350 50  0000 C CNN
F 1 "0" V 1884 2350 50  0000 C CNN
F 2 "" V 1930 2350 50  0001 C CNN
F 3 "~" H 2000 2350 50  0001 C CNN
	1    2000 2350
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1650 2350 1850 2350
Connection ~ 1650 2350
Wire Wire Line
	2150 2350 2400 2350
Wire Notes Line
	700  2150 700  3500
Wire Notes Line
	700  3500 2750 3500
Wire Notes Line
	2750 3500 2750 2150
Wire Notes Line
	2750 2150 700  2150
Wire Wire Line
	1500 3450 1650 3450
Text Notes 800  2250 0    50   ~ 10
bootstrap and emergency logic supply
$Comp
L Connector:TestPoint TP?
U 1 1 5D8EB60B
P 3600 1350
F 0 "TP?" H 3658 1468 50  0000 L CNN
F 1 "TestPoint" H 3658 1377 50  0000 L CNN
F 2 "" H 3800 1350 50  0001 C CNN
F 3 "~" H 3800 1350 50  0001 C CNN
	1    3600 1350
	1    0    0    -1  
$EndComp
$Sheet
S 6150 1250 500  250 
U 5D88F4F7
F0 "EMIFILTER" 50
F1 "emi_filter.sch" 50
F2 "OUT" I R 6650 1350 50 
F3 "IN" I L 6150 1350 50 
$EndSheet
Wire Wire Line
	5750 1350 6150 1350
Wire Wire Line
	6650 1350 6950 1350
$Sheet
S 4350 1250 650  750 
U 5D8E8EEF
F0 "POWERSENSE" 50
F1 "powersense.sch" 50
F2 "IN" I L 4350 1350 50 
F3 "OUT" O R 5000 1350 50 
F4 "SDA" B R 5000 1650 50 
F5 "SCL" B R 5000 1750 50 
F6 "3.3V" I L 4350 1650 50 
$EndSheet
Wire Wire Line
	5200 1350 5000 1350
Connection ~ 3600 1350
$Comp
L power:+3.3V #PWR?
U 1 1 5D9591D9
P 4200 1600
F 0 "#PWR?" H 4200 1450 50  0001 C CNN
F 1 "+3.3V" H 4215 1773 50  0000 C CNN
F 2 "" H 4200 1600 50  0001 C CNN
F 3 "" H 4200 1600 50  0001 C CNN
	1    4200 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	4350 1650 4200 1650
Wire Wire Line
	4200 1650 4200 1600
Wire Wire Line
	5000 1650 5200 1650
Wire Wire Line
	5000 1750 5200 1750
Wire Wire Line
	3600 1350 4100 1350
$Comp
L Device:D_Schottky D?
U 1 1 5D9884E0
P 1600 1400
F 0 "D?" V 1554 1479 50  0000 L CNN
F 1 "D_Schottky" V 1645 1479 50  0000 L CNN
F 2 "" H 1600 1400 50  0001 C CNN
F 3 "~" H 1600 1400 50  0001 C CNN
	1    1600 1400
	0    1    1    0   
$EndComp
Wire Notes Line
	700  2000 3700 2000
Wire Notes Line
	700  950  3700 950 
Wire Wire Line
	1600 1550 1600 1650
Connection ~ 1600 1650
Wire Wire Line
	1600 1650 2100 1650
Wire Wire Line
	1600 1250 1600 1150
Connection ~ 1600 1150
Wire Wire Line
	1600 1150 2100 1150
$Comp
L Jumper:Jumper_2_Bridged JP?
U 1 1 5DA35F38
P 5550 1350
F 0 "JP?" H 5550 1545 50  0000 C CNN
F 1 "Jumper_2_Bridged" H 5550 1454 50  0000 C CNN
F 2 "" H 5550 1350 50  0001 C CNN
F 3 "~" H 5550 1350 50  0001 C CNN
	1    5550 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	5350 1350 5200 1350
Connection ~ 5200 1350
$Comp
L Connector:Screw_Terminal_01x02 J?
U 1 1 5DA79942
P 4600 750
F 0 "J?" H 4518 425 50  0000 C CNN
F 1 "Screw_Terminal_01x02" H 4518 516 50  0000 C CNN
F 2 "" H 4600 750 50  0001 C CNN
F 3 "~" H 4600 750 50  0001 C CNN
	1    4600 750 
	0    -1   -1   0   
$EndComp
Text Notes 4200 650  0    50   ~ 0
for testing only
Wire Wire Line
	4600 950  4600 1050
Wire Wire Line
	4600 1050 4100 1050
Wire Wire Line
	4100 1050 4100 1350
Connection ~ 4100 1350
Wire Wire Line
	4100 1350 4350 1350
Wire Wire Line
	4700 950  4700 1050
Wire Wire Line
	4700 1050 5200 1050
Connection ~ 5200 1050
Wire Wire Line
	5200 1050 5200 1000
$Comp
L Connector:TestPoint TP?
U 1 1 5D8B77F1
P 1850 3450
F 0 "TP?" H 1908 3568 50  0000 L CNN
F 1 "TestPoint" H 1908 3477 50  0000 L CNN
F 2 "" H 2050 3450 50  0001 C CNN
F 3 "~" H 2050 3450 50  0001 C CNN
	1    1850 3450
	1    0    0    -1  
$EndComp
Connection ~ 1850 3450
Wire Wire Line
	1850 3450 2350 3450
$EndSCHEMATC
